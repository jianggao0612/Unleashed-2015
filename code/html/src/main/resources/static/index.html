<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0 }
        #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    
    //window.alert("Hello");
    var x, y;
    var markersArray = [];
    var image = 'images/cycling.png';
    var center = new google.maps.LatLng(-34.92866, 138.59863);
    function initialize() {
        var myOptions = {
            center: new google.maps.LatLng(-34.92866, 138.59863),
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
          myOptions);

        var marker = new google.maps.Marker({
            position: center,
            map: map,
            icon: image
        });
        markersArray.push(marker);
        
        var directionsService = new google.maps.DirectionsService();
        
        google.maps.event.addListener(map, 'click', function(event) {
            deleteOverlays();
            var request = {
                origin:event.latLng, 
                destination:event.latLng,
                travelMode: google.maps.DirectionsTravelMode.DRIVING
            };
            
            directionsService.route(request, function(response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    var marker = new google.maps.Marker({
                        position: response.routes[0].legs[0].start_location, 
                        map: map,
                        icon: image,
                        title:"Hello World!"
                    });
                    markersArray.push(marker);
                    map.panTo(event.latLng);
                }
            });
        });
    }
    
    function deleteOverlays() {
        if (markersArray) {
            for (i in markersArray) {
                markersArray[i].setMap(null);
            }
        markersArray.length = 0;
        }
    }
    
    function calcDist(){
        
    }

    </script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html>